import * as React from "react";
import PropTypes from "prop-types";
import Tabs from "@mui/material/Tabs";
import Tab from "@mui/material/Tab";
import Box from "@mui/material/Box";
import { useLocation } from "react-router-dom";
import Login from "./Login";
import Signup from "./Signup";
import AnimatedLines from "../dashboard/components/AnimatedLines";
import breakdown from "../assets/breakdown2.svg";
import { Typography } from "@mui/material";
import { useTheme } from "@mui/material/styles";
import { tokens } from "../theme";
import { useMediaQuery } from "@mui/material";
import banner from "../assets/banner.svg";
import { motion } from "framer-motion";

function CustomTabPanel(props) {
  const { children, value, index, ...other } = props;

  return (
    <div
      role="tabpanel"
      hidden={value !== index}
      id={`simple-tabpanel-${index}`}
      aria-labelledby={`simple-tab-${index}`}
      {...other}
    >
      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}
    </div>
  );
}

CustomTabPanel.propTypes = {
  children: PropTypes.node,
  index: PropTypes.number.isRequired,
  value: PropTypes.number.isRequired,
};

function a11yProps(index) {
  return {
    id: `simple-tab-${index}`,
    "aria-controls": `simple-tabpanel-${index}`,
  };
}

const Registration = () => {
  const location = useLocation();
  const theme = useTheme();
  const colors = tokens(theme.palette.mode);

  // Determine the initial tab based on the query parameter
  const queryParams = new URLSearchParams(location.search);
  const initialTab = queryParams.get("tab") === "signup" ? 1 : 0;

  const [value, setValue] = React.useState(initialTab);

  const handleChange = (event, newValue) => {
    setValue(newValue);
  };

  return (
    <Box className="flex items-center p-2 h-screen">
      <div className="flex    rounded-xl w-full items-center h-full">
        <Box className="w-full h-full  hidden md:block bg-[#D6CFFF]  items-center justify-center bg-no-repeat bg-cover bg-center rounded-xl">

       {/* { <AnimatedLines />} */}
       <Box 
       sx={{ padding: 1, marginBottom: 4, paddingLeft: 2}}>
        <div className="flex  items-center gap-6 ">
          <div className=" mt-10 h-full">
              <h1 className="md:text-2xl lg:text-4xl  sm:text-2xl xl:text-4xl 2xl:text-6xl  font-regular text-[#4B2E83]">
           Welcome to 
        </h1>
          </div>
         {/* {<img
          src={banner}
          alt="Logo"
          className="justify-end w-36  md:w-24 lg:w-30 2xl:w-36                      h-auto -mt-8 md:mt-0 2xl:-mt-6"  
        />} */}
       <div>
         <svg width="158" height="144" viewBox="0 0 158 144" fill="none" xmlns="http://www.w3.org/2000/svg" className="overflow-visible w-auto ">
        
          <circle cx="76" cy="12" r="12" fill="#4F378A"/>
          <circle cx="76" cy="12" r="6" fill="#A89FE3"/>

          {/* Swinging part */}
      <motion.g
        style={{ transformOrigin: "66px 12px" }}
        animate={{ rotate: [5, -5, 5] }}
        transition={{
          duration: 2,
          repeat: Infinity,
          ease: "easeInOut",
        }}
      >
          <path d="M14 76L76.5603 24L137 76H14Z" stroke="#4F378A" strokeWidth="3"/>
          <path d="M1 135.162V82C1 77.5817 4.58172 74 9 74H149C153.418 74 157 77.5817 157 82V135.162C157 139.581 153.418 143.162 149 143.162H9C4.58172 143.162 1 139.581 1 135.162Z" fill="#4F378A" stroke="#4F378A"/>
          <circle cx="141" cy="84" r="4" fill="#F4F1FF"/>
          <circle cx="17" cy="84" r="4" fill="#F4F1FF"/>
          <path d="M15 121.288C14.232 121.288 13.6773 121.181 13.336 120.968C12.9947 120.733 12.7813 120.424 12.696 120.04C12.632 119.656 12.6 119.261 12.6 118.856V101.32C12.6 100.915 12.632 100.531 12.696 100.168C12.7813 99.784 12.9947 99.4853 13.336 99.272C13.6773 99.0373 14.2427 98.92 15.032 98.92C15.8427 98.92 16.408 99.0373 16.728 99.272C17.0693 99.5067 17.272 99.8053 17.336 100.168C17.4213 100.531 17.464 100.925 17.464 101.352V106.888L24.312 99.72C24.7387 99.2933 25.1227 98.9947 25.464 98.824C25.8267 98.6533 26.1893 98.6213 26.552 98.728C26.936 98.8347 27.3413 99.1013 27.768 99.528C28.4933 100.189 28.856 100.776 28.856 101.288C28.8773 101.779 28.5787 102.333 27.96 102.952L20.6 110.12L28.024 117.224C28.6853 117.885 28.9947 118.483 28.952 119.016C28.9307 119.528 28.5573 120.083 27.832 120.68C27.32 121.107 26.872 121.373 26.488 121.48C26.1253 121.608 25.784 121.576 25.464 121.384C25.144 121.213 24.7813 120.904 24.376 120.456L17.464 113.256V118.888C17.464 119.293 17.4213 119.688 17.336 120.072C17.272 120.435 17.0693 120.733 16.728 120.968C16.3867 121.181 15.8107 121.288 15 121.288ZM37.9295 121.544C36.9268 121.544 35.9242 121.352 34.9215 120.968C33.9402 120.563 33.0442 119.997 32.2335 119.272C31.4228 118.547 30.7828 117.683 30.3135 116.68C29.8442 115.656 29.6095 114.525 29.6095 113.288C29.6095 112.136 29.8228 111.069 30.2495 110.088C30.6762 109.085 31.2735 108.2 32.0415 107.432C32.8095 106.664 33.6842 106.067 34.6655 105.64C35.6682 105.192 36.7348 104.968 37.8655 104.968C39.4015 104.968 40.7882 105.341 42.0255 106.088C43.2842 106.813 44.2868 107.805 45.0335 109.064C45.7802 110.323 46.1535 111.72 46.1535 113.256C46.1535 114.557 45.9082 115.72 45.4175 116.744C44.9482 117.747 44.3082 118.611 43.4975 119.336C42.7082 120.061 41.8228 120.616 40.8415 121C39.8815 121.363 38.9108 121.544 37.9295 121.544ZM37.8655 116.712C38.3775 116.712 38.9002 116.584 39.4335 116.328C39.9668 116.072 40.4148 115.688 40.7775 115.176C41.1402 114.664 41.3215 114.013 41.3215 113.224C41.3215 112.541 41.1722 111.944 40.8735 111.432C40.5748 110.92 40.1588 110.525 39.6255 110.248C39.1135 109.949 38.5162 109.8 37.8335 109.8C37.1935 109.8 36.6175 109.949 36.1055 110.248C35.6148 110.547 35.2095 110.963 34.8895 111.496C34.5908 112.008 34.4415 112.595 34.4415 113.256C34.4415 114.024 34.6122 114.675 34.9535 115.208C35.3162 115.72 35.7642 116.104 36.2975 116.36C36.8308 116.595 37.3535 116.712 37.8655 116.712ZM50.7105 121.288C49.9425 121.288 49.3878 121.171 49.0465 120.936C48.7052 120.701 48.5025 120.403 48.4385 120.04C48.3745 119.677 48.3425 119.283 48.3425 118.856V107.656C48.3425 107.229 48.3745 106.845 48.4385 106.504C48.5238 106.141 48.7372 105.853 49.0785 105.64C49.4198 105.405 49.9852 105.288 50.7745 105.288C51.5638 105.288 52.1398 105.448 52.5025 105.768C52.8652 106.067 53.0465 106.568 53.0465 107.272L52.6305 107.624C52.6732 107.517 52.8012 107.336 53.0145 107.08C53.2278 106.824 53.5052 106.557 53.8465 106.28C54.1878 106.003 54.5825 105.768 55.0305 105.576C55.4998 105.363 56.0012 105.256 56.5345 105.256C57.2385 105.256 57.8678 105.363 58.4225 105.576C58.9985 105.768 59.5105 106.067 59.9585 106.472C60.4278 106.856 60.8332 107.347 61.1745 107.944C61.4732 107.517 61.8358 107.101 62.2625 106.696C62.6892 106.291 63.1905 105.949 63.7665 105.672C64.3638 105.395 65.0252 105.256 65.7505 105.256C66.9878 105.256 68.0332 105.576 68.8865 106.216C69.7612 106.835 70.4225 107.731 70.8705 108.904C71.3185 110.077 71.5425 111.496 71.5425 113.16V118.888C71.5425 119.293 71.4998 119.688 71.4145 120.072C71.3505 120.435 71.1478 120.733 70.8065 120.968C70.4652 121.181 69.8998 121.288 69.1105 121.288C68.3212 121.288 67.7558 121.171 67.4145 120.936C67.0945 120.701 66.8918 120.403 66.8065 120.04C66.7425 119.656 66.7105 119.261 66.7105 118.856V113.128C66.7105 112.467 66.6358 111.912 66.4865 111.464C66.3372 111.016 66.1025 110.675 65.7825 110.44C65.4838 110.184 65.0998 110.056 64.6305 110.056C64.1398 110.056 63.7238 110.173 63.3825 110.408C63.0412 110.621 62.7852 110.963 62.6145 111.432C62.4438 111.88 62.3585 112.456 62.3585 113.16V118.888C62.3585 119.315 62.3052 119.72 62.1985 120.104C62.0918 120.467 61.8572 120.765 61.4945 121C61.1532 121.213 60.5985 121.309 59.8305 121.288C59.0625 121.267 58.5185 121.139 58.1985 120.904C57.8785 120.669 57.6865 120.371 57.6225 120.008C57.5585 119.624 57.5265 119.24 57.5265 118.856V113.128C57.5265 112.467 57.4518 111.912 57.3025 111.464C57.1532 110.995 56.9292 110.643 56.6305 110.408C56.3318 110.173 55.9372 110.056 55.4465 110.056C54.9132 110.056 54.4758 110.195 54.1345 110.472C53.7932 110.749 53.5372 111.123 53.3665 111.592C53.2172 112.04 53.1425 112.552 53.1425 113.128V118.888C53.1425 119.315 53.0998 119.709 53.0145 120.072C52.9505 120.435 52.7478 120.733 52.4065 120.968C52.0652 121.181 51.4998 121.288 50.7105 121.288ZM76.648 121.288C75.88 121.288 75.3253 121.171 74.984 120.936C74.6427 120.701 74.44 120.403 74.376 120.04C74.312 119.677 74.28 119.283 74.28 118.856V107.656C74.28 107.229 74.312 106.845 74.376 106.504C74.4613 106.141 74.6747 105.853 75.016 105.64C75.3573 105.405 75.9227 105.288 76.712 105.288C77.5013 105.288 78.0773 105.448 78.44 105.768C78.8027 106.067 78.984 106.568 78.984 107.272L78.568 107.624C78.6107 107.517 78.7387 107.336 78.952 107.08C79.1653 106.824 79.4427 106.557 79.784 106.28C80.1253 106.003 80.52 105.768 80.968 105.576C81.4373 105.363 81.9387 105.256 82.472 105.256C83.176 105.256 83.8053 105.363 84.36 105.576C84.936 105.768 85.448 106.067 85.896 106.472C86.3653 106.856 86.7707 107.347 87.112 107.944C87.4107 107.517 87.7733 107.101 88.2 106.696C88.6267 106.291 89.128 105.949 89.704 105.672C90.3013 105.395 90.9627 105.256 91.688 105.256C92.9253 105.256 93.9707 105.576 94.824 106.216C95.6987 106.835 96.36 107.731 96.808 108.904C97.256 110.077 97.48 111.496 97.48 113.16V118.888C97.48 119.293 97.4373 119.688 97.352 120.072C97.288 120.435 97.0853 120.733 96.744 120.968C96.4027 121.181 95.8373 121.288 95.048 121.288C94.2587 121.288 93.6933 121.171 93.352 120.936C93.032 120.701 92.8293 120.403 92.744 120.04C92.68 119.656 92.648 119.261 92.648 118.856V113.128C92.648 112.467 92.5733 111.912 92.424 111.464C92.2747 111.016 92.04 110.675 91.72 110.44C91.4213 110.184 91.0373 110.056 90.568 110.056C90.0773 110.056 89.6613 110.173 89.32 110.408C88.9787 110.621 88.7227 110.963 88.552 111.432C88.3813 111.88 88.296 112.456 88.296 113.16V118.888C88.296 119.315 88.2427 119.72 88.136 120.104C88.0293 120.467 87.7947 120.765 87.432 121C87.0907 121.213 86.536 121.309 85.768 121.288C85 121.267 84.456 121.139 84.136 120.904C83.816 120.669 83.624 120.371 83.56 120.008C83.496 119.624 83.464 119.24 83.464 118.856V113.128C83.464 112.467 83.3893 111.912 83.24 111.464C83.0907 110.995 82.8667 110.643 82.568 110.408C82.2693 110.173 81.8747 110.056 81.384 110.056C80.8507 110.056 80.4133 110.195 80.072 110.472C79.7307 110.749 79.4747 111.123 79.304 111.592C79.1547 112.04 79.08 112.552 79.08 113.128V118.888C79.08 119.315 79.0373 119.709 78.952 120.072C78.888 120.435 78.6853 120.733 78.344 120.968C78.0027 121.181 77.4373 121.288 76.648 121.288ZM102.81 121.288C102.02 121.288 101.455 121.181 101.114 120.968C100.794 120.733 100.591 120.435 100.506 120.072C100.442 119.688 100.41 119.293 100.41 118.888V107.72C100.41 107.293 100.442 106.899 100.506 106.536C100.591 106.173 100.804 105.885 101.146 105.672C101.487 105.437 102.052 105.32 102.842 105.32C103.61 105.32 104.154 105.437 104.474 105.672C104.815 105.907 105.018 106.205 105.082 106.568C105.167 106.931 105.21 107.336 105.21 107.784V118.92C105.21 119.325 105.167 119.72 105.082 120.104C105.018 120.467 104.815 120.755 104.474 120.968C104.154 121.181 103.599 121.288 102.81 121.288ZM102.81 102.984C101.999 102.984 101.423 102.867 101.082 102.632C100.74 102.397 100.527 102.088 100.442 101.704C100.378 101.32 100.346 100.915 100.346 100.488C100.346 100.04 100.388 99.6347 100.474 99.272C100.559 98.888 100.772 98.5893 101.114 98.376C101.455 98.1413 102.031 98.024 102.842 98.024C103.631 98.024 104.196 98.1413 104.538 98.376C104.879 98.6107 105.082 98.92 105.146 99.304C105.231 99.688 105.274 100.093 105.274 100.52C105.274 100.947 105.231 101.352 105.146 101.736C105.082 102.12 104.879 102.429 104.538 102.664C104.196 102.877 103.62 102.984 102.81 102.984ZM116.255 121.288C115.167 121.288 114.228 121.171 113.439 120.936C112.671 120.701 112.031 120.339 111.519 119.848C111.007 119.357 110.623 118.739 110.367 117.992C110.132 117.224 110.015 116.317 110.015 115.272V102.28C110.015 101.853 110.047 101.469 110.111 101.128C110.196 100.787 110.409 100.509 110.751 100.296C111.092 100.061 111.647 99.944 112.415 99.944C113.183 99.944 113.737 100.061 114.079 100.296C114.42 100.531 114.623 100.829 114.687 101.192C114.772 101.555 114.815 101.949 114.815 102.376V115.08C114.815 115.421 114.836 115.709 114.879 115.944C114.943 116.157 115.028 116.317 115.135 116.424C115.241 116.531 115.391 116.605 115.583 116.648C115.775 116.691 116.009 116.712 116.287 116.712C116.756 116.712 117.172 116.755 117.535 116.84C117.897 116.925 118.175 117.117 118.367 117.416C118.58 117.715 118.687 118.216 118.687 118.92C118.687 119.688 118.569 120.243 118.335 120.584C118.1 120.925 117.791 121.128 117.407 121.192C117.044 121.256 116.66 121.288 116.255 121.288ZM109.023 105.544H112.543L116.959 105.416C117.364 105.416 117.748 105.459 118.111 105.544C118.473 105.608 118.772 105.811 119.007 106.152C119.241 106.493 119.359 107.059 119.359 107.848C119.359 108.573 119.241 109.107 119.007 109.448C118.793 109.789 118.505 110.013 118.143 110.12C117.78 110.205 117.385 110.248 116.959 110.248L112.767 110.152H108.895C108.276 110.131 107.839 109.949 107.583 109.608C107.348 109.245 107.231 108.648 107.231 107.816C107.231 107.048 107.38 106.483 107.679 106.12C107.977 105.736 108.425 105.544 109.023 105.544ZM127.581 121.288C126.706 121.288 125.928 121.235 125.245 121.128C124.584 121.043 124.008 120.872 123.517 120.616C123.048 120.36 122.664 120.008 122.365 119.56C122.066 119.112 121.842 118.536 121.693 117.832C121.565 117.107 121.501 116.221 121.501 115.176V100.392C121.501 99.9653 121.533 99.5707 121.597 99.208C121.682 98.8453 121.896 98.5467 122.237 98.312C122.578 98.0773 123.133 97.96 123.901 97.96C124.669 97.96 125.213 98.0773 125.533 98.312C125.874 98.5467 126.088 98.8453 126.173 99.208C126.258 99.5707 126.301 99.9653 126.301 100.392V114.952C126.301 115.293 126.312 115.581 126.333 115.816C126.376 116.029 126.44 116.2 126.525 116.328C126.632 116.456 126.77 116.541 126.941 116.584C127.112 116.627 127.336 116.648 127.613 116.648C127.869 116.648 128.125 116.68 128.381 116.744C128.658 116.808 128.893 117 129.085 117.32C129.277 117.64 129.373 118.173 129.373 118.92C129.373 119.688 129.277 120.243 129.085 120.584C128.893 120.925 128.658 121.128 128.381 121.192C128.125 121.256 127.858 121.288 127.581 121.288ZM134.262 127.752C133.388 127.368 132.876 126.941 132.726 126.472C132.598 126.003 132.716 125.373 133.078 124.584L141.11 106.632C141.473 105.8 141.868 105.309 142.294 105.16C142.742 104.989 143.404 105.075 144.278 105.416C145.132 105.821 145.622 106.248 145.75 106.696C145.9 107.144 145.804 107.741 145.462 108.488L137.398 126.568C137.036 127.4 136.641 127.901 136.214 128.072C135.788 128.243 135.137 128.136 134.262 127.752ZM137.046 120.296L129.526 108.84C129.057 108.136 128.865 107.549 128.95 107.08C129.057 106.611 129.484 106.131 130.23 105.64C131.062 105.128 131.702 104.936 132.15 105.064C132.62 105.171 133.089 105.587 133.558 106.312L139.094 114.792L137.046 120.296Z" fill="#D6CFFF"/>
          </motion.g>
          </svg>
        
       </div>
        </div>
       

        <p
          className="mt-4 mb-4 md:text-xs lg:text-sm  sm:text-2xl xl:text-base 2xl:text-xl"
          style={{ color: colors.text.secondary, fontFamily: "Poppins, sans-serif" }}

        >
          Your journey to achieving your goals starts here.
        </p>
    
       </Box>
        <div className="flex justify-center items-center  w-full">
         <img
          src={breakdown}
          alt="Logo"
          className="justify-end w-10/12 md:w-9/12 sm;w-8/12 xs-w-6/12    h-auto "
        />
     </div>
      </Box>
     





     <div className="flex w-full bg-[#FBF9FF] h-full  rounded-xl flex-col items-center">
       <div className="flex    w-full h-full flex-col items-center relative">
        <p className="block md:hidden fredoka text-2xl font-semibold"
        style={{ color: colors.text.secondary, fontFamily: "Fredoka, sans-serif", marginTop: "20px" }}
        >
          Kommitly
        </p>
        <Box sx={{ borderBottom: 1, borderColor: "divider", backgroundColor: "#FBF9FF", marginTop: "20px",width: "90%", borderRadius: "8px", justifyContent: "center",  display: "flex" }}>
          <Tabs value={value} onChange={handleChange} aria-label="Login and Signup Tabs">
            <Tab label="Login" {...a11yProps(0)}  sx={{
           fontSize: {
      xs: '1rem',  
      md: '0.8rem',  // ~text-base on small screens
      xl: '1.2rem', // ~text-xl on extra large screens
      lg: '0.8rem' // not standard, just showing possible logic
    }
        }}/>
            <Tab label="Signup" {...a11yProps(1)}  sx={{
    fontSize: {
      xs: '1rem', 
      md: '0.8rem',   // ~text-base on small screens
      xl: '1.2rem', // ~text-xl on extra large screens
      lg: '0.8rem' // not standard, just showing possible logic
    }
  }}/>
          </Tabs>
        </Box>
        <CustomTabPanel value={value} index={0} className="w-full">
          <Login />
        </CustomTabPanel>
        <CustomTabPanel value={value} index={1} className="w-full">
          <Signup />
        </CustomTabPanel>
      </div>
     </div>
      </div>
    </Box>
  );
};

export default Registration;